/*! medium-zoom 1.0.4 | MIT License | https://github.com/francoischalifour/medium-zoom */
!(function(e, t) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = t())
    : 'function' == typeof define && define.amd
    ? define(t)
    : (e.mediumZoom = t())
})(this, function() {
  'use strict'
  var H =
      Object.assign ||
      function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var o = arguments[t]
          for (var n in o)
            Object.prototype.hasOwnProperty.call(o, n) && (e[n] = o[n])
        }
        return e
      },
    o = function(e) {
      return 'IMG' === e.tagName
    },
    C = function(e) {
      return e && 1 === e.nodeType
    },
    O = function(e) {
      return '.svg' === (e.currentSrc || e.src).substr(-4).toLowerCase()
    },
    c = function(e) {
      try {
        return Array.isArray(e)
          ? e.filter(o)
          : ((t = e),
            NodeList.prototype.isPrototypeOf(t)
              ? [].slice.call(e).filter(o)
              : C(e)
              ? [e].filter(o)
              : 'string' == typeof e
              ? [].slice
                  .call(
                    'undefined' != typeof document &&
                      document.querySelectorAll(e)
                  )
                  .filter(o)
              : [])
      } catch (e) {
        throw new TypeError(
          'The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom'
        )
      }
      var t
    },
    x = function(e, t) {
      var o = H({ bubbles: !1, cancelable: !1, detail: void 0 }, t)
      if (
        'undefined' != typeof window &&
        'function' == typeof window.CustomEvent
      )
        return new CustomEvent(e, o)
      var n =
        'undefined' != typeof document && document.createEvent('CustomEvent')
      return n.initCustomEvent(e, o.bubbles, o.cancelable, o.detail), n
    }
  return (
    (function(e, t) {
      void 0 === t && (t = {})
      var o = t.insertAt
      if (e && 'undefined' != typeof document) {
        var n = document.head || document.getElementsByTagName('head')[0],
          d = document.createElement('style')
        ;(d.type = 'text/css'),
          'top' === o && n.firstChild
            ? n.insertBefore(d, n.firstChild)
            : n.appendChild(d),
          d.styleSheet
            ? (d.styleSheet.cssText = e)
            : d.appendChild(document.createTextNode(e))
      }
    })(
      '.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}'
    ),
    function t(e) {
      var o =
          1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
        n =
          ('undefined' != typeof window && window.Promise) ||
          function(e) {
            function t() {}
            e(t, t)
          },
        d = function() {
          for (var e = arguments.length, t = Array(e), o = 0; o < e; o++)
            t[o] = arguments[o]
          var d = t.reduce(function(e, t) {
            return [].concat(e, c(t))
          }, [])
          return (
            d
              .filter(function(e) {
                return -1 === h.indexOf(e)
              })
              .forEach(function(e) {
                h.push(e), e.classList.add('medium-zoom-image')
              }),
            m.forEach(function(e) {
              var t = e.type,
                o = e.listener,
                n = e.options
              d.forEach(function(e) {
                e.addEventListener(t, o, n)
              })
            }),
            L
          )
        },
        i = function() {
          var p = (0 < arguments.length && void 0 !== arguments[0]
              ? arguments[0]
              : {}
            ).target,
            y = function() {
              var e = {
                  width:
                    'undefined' != typeof document &&
                    document.documentElement.clientWidth,
                  height:
                    'undefined' != typeof document &&
                    document.documentElement.clientHeight,
                  left: 0,
                  top: 0,
                  right: 0,
                  bottom: 0,
                },
                t = void 0,
                o = void 0
              if (b.container)
                if (b.container instanceof Object)
                  (t =
                    (e = H({}, e, b.container)).width -
                    e.left -
                    e.right -
                    2 * b.margin),
                    (o = e.height - e.top - e.bottom - 2 * b.margin)
                else {
                  var n = (C(b.container)
                      ? b.container
                      : 'undefined' != typeof document &&
                        document.querySelector(b.container)
                    ).getBoundingClientRect(),
                    d = n.width,
                    i = n.height,
                    r = n.left,
                    m = n.top
                  e = H({}, e, { width: d, height: i, left: r, top: m })
                }
              ;(t = t || e.width - 2 * b.margin),
                (o = o || e.height - 2 * b.margin)
              var u = w.zoomedHd || w.original,
                a = O(u) ? t : u.naturalWidth || t,
                c = O(u) ? o : u.naturalHeight || o,
                l = u.getBoundingClientRect(),
                f = l.top,
                s = l.left,
                p = l.width,
                y = l.height,
                g = Math.min(a, t) / p,
                h = Math.min(c, o) / y,
                v = Math.min(g, h),
                z =
                  'scale(' +
                  v +
                  ') translate3d(' +
                  ((t - p) / 2 - s + b.margin + e.left) / v +
                  'px, ' +
                  ((o - y) / 2 - f + b.margin + e.top) / v +
                  'px, 0)'
              ;(w.zoomed.style.transform = z),
                w.zoomedHd && (w.zoomedHd.style.transform = z)
            }
          return new n(function(t) {
            if (p && -1 === h.indexOf(p)) t(L)
            else if (w.zoomed) t(L)
            else {
              if (p) w.original = p
              else {
                if (!(0 < h.length)) return void t(L)
                var e = h
                w.original = e[0]
              }
              var o, n, d, i, r, m, u, a, c
              if (
                (w.original.dispatchEvent(
                  x('medium-zoom:open', { detail: { zoom: L } })
                ),
                (z =
                  ('undefined' != typeof window && window.pageYOffset) ||
                  ('undefined' != typeof document &&
                    document.documentElement.scrollTop) ||
                  ('undefined' != typeof document && document.body.scrollTop) ||
                  0),
                (v = !0),
                (w.zoomed = ((o = w.original),
                (n = o.getBoundingClientRect()),
                (d = n.top),
                (i = n.left),
                (r = n.width),
                (m = n.height),
                (u = o.cloneNode()),
                (a =
                  ('undefined' != typeof window && window.pageYOffset) ||
                  ('undefined' != typeof document &&
                    document.documentElement.scrollTop) ||
                  ('undefined' != typeof document && document.body.scrollTop) ||
                  0),
                (c =
                  ('undefined' != typeof window && window.pageXOffset) ||
                  ('undefined' != typeof document &&
                    document.documentElement.scrollLeft) ||
                  ('undefined' != typeof document &&
                    document.body.scrollLeft) ||
                  0),
                u.removeAttribute('id'),
                (u.style.position = 'absolute'),
                (u.style.top = d + a + 'px'),
                (u.style.left = i + c + 'px'),
                (u.style.width = r + 'px'),
                (u.style.height = m + 'px'),
                (u.style.transform = ''),
                u)),
                'undefined' != typeof document && document.body.appendChild(E),
                b.template)
              ) {
                var l = C(b.template)
                  ? b.template
                  : 'undefined' != typeof document &&
                    document.querySelector(b.template)
                ;(w.template =
                  'undefined' != typeof document &&
                  document.createElement('div')),
                  w.template.appendChild(l.content.cloneNode(!0)),
                  'undefined' != typeof document &&
                    document.body.appendChild(w.template)
              }
              if (
                ('undefined' != typeof document &&
                  document.body.appendChild(w.zoomed),
                'undefined' != typeof window &&
                  window.requestAnimationFrame(function() {
                    'undefined' != typeof document &&
                      document.body.classList.add('medium-zoom--opened')
                  }),
                w.original.classList.add('medium-zoom-image--hidden'),
                w.zoomed.classList.add('medium-zoom-image--opened'),
                w.zoomed.addEventListener('click', g),
                w.zoomed.addEventListener('transitionend', function e() {
                  ;(v = !1),
                    w.zoomed.removeEventListener('transitionend', e),
                    w.original.dispatchEvent(
                      x('medium-zoom:opened', { detail: { zoom: L } })
                    ),
                    t(L)
                }),
                w.original.getAttribute('data-zoom-src'))
              ) {
                ;(w.zoomedHd = w.zoomed.cloneNode()),
                  w.zoomedHd.removeAttribute('srcset'),
                  w.zoomedHd.removeAttribute('sizes'),
                  (w.zoomedHd.src = w.zoomed.getAttribute('data-zoom-src')),
                  (w.zoomedHd.onerror = function() {
                    clearInterval(f),
                      console.warn(
                        'Unable to reach the zoom image target ' +
                          w.zoomedHd.src
                      ),
                      (w.zoomedHd = null),
                      y()
                  })
                var f = setInterval(function() {
                  w.zoomedHd.complete &&
                    (clearInterval(f),
                    w.zoomedHd.classList.add('medium-zoom-image--opened'),
                    w.zoomedHd.addEventListener('click', g),
                    'undefined' != typeof document &&
                      document.body.appendChild(w.zoomedHd),
                    y())
                }, 10)
              } else if (w.original.hasAttribute('srcset')) {
                ;(w.zoomedHd = w.zoomed.cloneNode()),
                  w.zoomedHd.removeAttribute('sizes')
                var s = w.zoomedHd.addEventListener('load', function() {
                  w.zoomedHd.removeEventListener('load', s),
                    w.zoomedHd.classList.add('medium-zoom-image--opened'),
                    w.zoomedHd.addEventListener('click', g),
                    'undefined' != typeof document &&
                      document.body.appendChild(w.zoomedHd),
                    y()
                })
              } else y()
            }
          })
        },
        g = function() {
          return new n(function(t) {
            !v && w.original
              ? ((v = !0),
                'undefined' != typeof document &&
                  document.body.classList.remove('medium-zoom--opened'),
                (w.zoomed.style.transform = ''),
                w.zoomedHd && (w.zoomedHd.style.transform = ''),
                w.template &&
                  ((w.template.style.transition = 'opacity 150ms'),
                  (w.template.style.opacity = 0)),
                w.original.dispatchEvent(
                  x('medium-zoom:close', { detail: { zoom: L } })
                ),
                w.zoomed.addEventListener('transitionend', function e() {
                  w.original.classList.remove('medium-zoom-image--hidden'),
                    'undefined' != typeof document &&
                      document.body.removeChild(w.zoomed),
                    w.zoomedHd &&
                      'undefined' != typeof document &&
                      document.body.removeChild(w.zoomedHd),
                    'undefined' != typeof document &&
                      document.body.removeChild(E),
                    w.zoomed.classList.remove('medium-zoom-image--opened'),
                    w.template &&
                      'undefined' != typeof document &&
                      document.body.removeChild(w.template),
                    (v = !1),
                    w.zoomed.removeEventListener('transitionend', e),
                    w.original.dispatchEvent(
                      x('medium-zoom:closed', { detail: { zoom: L } })
                    ),
                    (w.original = null),
                    (w.zoomed = null),
                    (w.zoomedHd = null),
                    (w.template = null),
                    t(L)
                }))
              : t(L)
          })
        },
        r = function() {
          var e = (0 < arguments.length && void 0 !== arguments[0]
            ? arguments[0]
            : {}
          ).target
          return w.original ? g() : i({ target: e })
        },
        h = [],
        m = [],
        v = !1,
        z = 0,
        b = o,
        w = { original: null, zoomed: null, zoomedHd: null, template: null }
      '[object Object]' === Object.prototype.toString.call(e)
        ? (b = e)
        : (e || 'string' == typeof e) && d(e),
        (b = H(
          {
            margin: 0,
            background: '#fff',
            scrollOffset: 40,
            container: null,
            template: null,
          },
          b
        ))
      var u,
        a,
        E = ((u = b.background),
        (a =
          'undefined' != typeof document &&
          document.createElement('div')).classList.add('medium-zoom-overlay'),
        (a.style.background = u),
        a)
      'undefined' != typeof document &&
        document.addEventListener('click', function(e) {
          var t = e.target
          t !== E ? -1 !== h.indexOf(t) && r({ target: t }) : g()
        }),
        'undefined' != typeof document &&
          document.addEventListener('keyup', function(e) {
            27 === (e.keyCode || e.which) && g()
          }),
        'undefined' != typeof document &&
          document.addEventListener('scroll', function() {
            if (!v && w.original) {
              var e =
                ('undefined' != typeof window && window.pageYOffset) ||
                ('undefined' != typeof document &&
                  document.documentElement.scrollTop) ||
                ('undefined' != typeof document && document.body.scrollTop) ||
                0
              Math.abs(z - e) > b.scrollOffset && setTimeout(g, 150)
            }
          }),
        'undefined' != typeof window && window.addEventListener('resize', g)
      var L = {
        open: i,
        close: g,
        toggle: r,
        update: function() {
          var e =
              0 < arguments.length && void 0 !== arguments[0]
                ? arguments[0]
                : {},
            t = e
          if (
            (e.background && (E.style.background = e.background),
            e.container &&
              e.container instanceof Object &&
              (t.container = H({}, b.container, e.container)),
            e.template)
          ) {
            var o = C(e.template)
              ? e.template
              : 'undefined' != typeof document &&
                document.querySelector(e.template)
            t.template = o
          }
          return (
            (b = H({}, b, t)),
            h.forEach(function(e) {
              e.dispatchEvent(x('medium-zoom:update', { detail: { zoom: L } }))
            }),
            L
          )
        },
        clone: function() {
          var e =
            0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
          return t(H({}, b, e))
        },
        attach: d,
        detach: function() {
          for (var e = arguments.length, t = Array(e), o = 0; o < e; o++)
            t[o] = arguments[o]
          w.zoomed && g()
          var n =
            0 < t.length
              ? t.reduce(function(e, t) {
                  return [].concat(e, c(t))
                }, [])
              : h
          return (
            n.forEach(function(e) {
              e.classList.remove('medium-zoom-image'),
                e.dispatchEvent(
                  x('medium-zoom:detach', { detail: { zoom: L } })
                )
            }),
            (h = h.filter(function(e) {
              return -1 === n.indexOf(e)
            })),
            L
          )
        },
        on: function(t, o) {
          var n =
            2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}
          return (
            h.forEach(function(e) {
              e.addEventListener('medium-zoom:' + t, o, n)
            }),
            m.push({ type: 'medium-zoom:' + t, listener: o, options: n }),
            L
          )
        },
        off: function(t, o) {
          var n =
            2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}
          return (
            h.forEach(function(e) {
              e.removeEventListener('medium-zoom:' + t, o, n)
            }),
            (m = m.filter(function(e) {
              return !(
                e.type === 'medium-zoom:' + t &&
                e.listener.toString() === o.toString()
              )
            })),
            L
          )
        },
        getOptions: function() {
          return b
        },
        getImages: function() {
          return h
        },
        getZoomedImage: function() {
          return w.original
        },
      }
      return L
    }
  )
})
